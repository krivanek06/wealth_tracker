<!-- account state -->
<div class="mx-auto mb-4 md:w-10/12">
	<app-investment-account-state
		(cashChangeClickEmitter)="onChangeChangeClick()"
		[investmentAccount]="investmentAccount$ | async"
	></app-investment-account-state>
</div>

<div class="grid grid-cols-1 gap-4 xl:grid-cols-2">
	<div class="">
		<!-- account growth -->
		<app-investment-account-portfolio-growth-chart
			[investmentAccountGrowth]="investmentAccountGrowth$ | async"
		></app-investment-account-portfolio-growth-chart>
	</div>

	<div>TODO - display account balance growth</div>
</div>

<!-- period change -->
<div class="grid grid-cols-1 gap-4 p-4 mb-6 sm:grid-cols-2 md:grid-cols-3 xl:flex xl:justify-around sm:max-xl:pl-14">
	<ng-container *ngIf="accountPeriodChange$ | async as accountPeriodChange; else skeletonPeriod">
		<app-investment-account-period-change
			*ngFor="let periodChange of accountPeriodChange"
			[periodChange]="periodChange"
		></app-investment-account-period-change>
	</ng-container>

	<ng-template #skeletonPeriod>
		<div *ngRange="6" class="w-[220px] h-14 g-skeleton"></div>
	</ng-template>
</div>

<!-- allocation charts -->
<div class="grid gap-4 md:grid-cols-2">
	<!-- sector allocation chart -->
	<div>
		<app-pie-chart
			class="scale-125"
			[series]="sectorAllocationChart$ | async"
			[displayValue]="(investmentAccount$ | async)?.currentBalance"
		></app-pie-chart>
	</div>

	<!-- asset allocation chart -->
	<div>TODO percentage allocation in each asset - display only 8-10</div>
</div>

<!-- action buttons -->
<app-investment-account-action-buttons
	[sectorAllocationInputSource]="sectorAllocationInputSource$ | async"
	[formControl]="sectorFormControl"
	(addEmitter)="onAddHolding()"
	(showHistoryEmitter)="onShowHisotry()"
></app-investment-account-action-buttons>

<!-- active investments table -->
<app-investment-account-active-holdings-table
	(holdingClickedEmitter)="onAddHolding($event)"
	[totalInvestedAmount]="totalInvestedAmount$ | async"
	[activeHoldings]="filteredActiveHoldings$ | async"
></app-investment-account-active-holdings-table>
