<app-dialog-close-header (dialogCloseEmitter)="onCancel()" title="Tag Manager"></app-dialog-close-header>

<mat-dialog-content class="px-4 py-4 sm:px-8">
	<div class="flex flex-col gap-4 mb-8 sm:flex-row lg:justify-end">
		<!-- create income button -->
		<button
			class="max-lg:flex-1 g-button-size-lg"
			mat-stroked-button
			color="accent"
			type="button"
			(click)="onCreateButton(TagDataType.Income)"
			matTooltip="Create an Income tag"
		>
			<mat-icon>add</mat-icon>
			Add Income
		</button>

		<!-- create expense button -->
		<button
			class="max-lg:flex-1 g-button-size-lg"
			mat-stroked-button
			color="warn"
			type="button"
			(click)="onCreateButton(TagDataType.Expense)"
			matTooltip="Create an Expense tag"
		>
			<mat-icon>add</mat-icon>
			Add Expense
		</button>
	</div>

	<!-- new tag -->
	<div *ngIf="creatingNewTagType">
		<h2 class="px-2 space-x-2">New Tag: <span [appTagTypeName]="creatingNewTagType"></span></h2>
		<app-tag-item
			(createTagEmitter)="onCreateTag($event)"
			[editing]="true"
			[tagType]="creatingNewTagType"
		></app-tag-item>

		<div class="my-4">
			<mat-divider></mat-divider>
		</div>
	</div>

	<!-- Income -->
	<div *ngIf="personalAccountIncomeTags$ | async as personalAccountIncomeTags">
		<h2 class="px-2">
			<span [appTagTypeName]="TagDataType.Income"></span> Tags: {{ personalAccountIncomeTags.length }}
		</h2>
		<app-tag-item
			class="max-lg:my-10"
			*ngFor="let tag of personalAccountIncomeTags; trackBy:tagTrackByFn"
			[tag]="tag"
			[tagType]="TagDataType.Income"
			(removeTagEmitter)="onRemoveTag($event)"
			(editTagEmitter)="onEditTag($event)"
		></app-tag-item>
	</div>

	<div class="my-4">
		<mat-divider></mat-divider>
	</div>

	<!-- Expense -->
	<div *ngIf="personalAccountExpenseTags$ | async as personalAccountExpenseTags">
		<!-- heading -->
		<h2 class="flex flex-col gap-2 px-2 sm:items-center sm:justify-between sm:flex-row">
			<div><span [appTagTypeName]="TagDataType.Expense"></span> Tags: {{ personalAccountExpenseTags.length }}</div>
			<div class="flex items-center gap-3">
				<mat-icon
					matTooltip="Use budgeting to setup a monthly plan of spending your money for individual tags. Using budgeting you will see a
          progress bar filled based on a percentage of spent money compared to maximum allowance. If you don't want to use
          budgeting for some tags, keep it on 0."
				>
					help
				</mat-icon>
				<span class="text-wt-primary-dark">Budgeting:</span>
				<span>{{ monthlyBudget$ | async | currency }}</span>
			</div>
		</h2>

		<!-- expense items -->
		<app-tag-item
			class="max-lg:mb-10"
			*ngFor="let tag of personalAccountExpenseTags; trackBy:tagTrackByFn"
			[tag]="tag"
			[tagType]="TagDataType.Expense"
			(removeTagEmitter)="onRemoveTag($event)"
			(editTagEmitter)="onEditTag($event)"
		></app-tag-item>
	</div>
</mat-dialog-content>

<!-- action buttons -->
<mat-dialog-actions class="mt-3">
	<div class="g-mat-dialog-actions-end">
		<button mat-stroked-button mat-dialog-close type="button">Cancel</button>
	</div>
</mat-dialog-actions>
